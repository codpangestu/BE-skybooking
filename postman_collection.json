{
    "info": {
        "_postman_id": "a1b2c3d4-e5f6-7a8b-9c0d-e1f2a3b4c5d6",
        "name": "Final Project - Full API (Refactored)",
        "description": "Comprehensive and regenerated collection covering every single endpoint in the backend, organized by access level.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "1. Public Routes",
            "item": [
                {
                    "name": "Auth",
                    "item": [
                        {
                            "name": "Register",
                            "request": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"name\": \"Passenger One\",\n    \"email\": \"passenger@gmail.com\",\n    \"password\": \"password\",\n    \"password_confirmation\": \"password\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/register",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "register"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Login",
                            "event": [
                                {
                                    "listen": "test",
                                    "script": {
                                        "exec": [
                                            "var jsonData = pm.response.json();",
                                            "if (jsonData.success && jsonData.data.token) {",
                                            "    pm.environment.set(\"api_token\", jsonData.data.token);",
                                            "}"
                                        ],
                                        "type": "text/javascript"
                                    }
                                }
                            ],
                            "request": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"email\": \"passenger@gmail.com\",\n    \"password\": \"password\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/login",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "login"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Discovery",
                    "item": [
                        {
                            "name": "List Airports",
                            "request": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/airports",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "airports"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "List Flights (Search)",
                            "request": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/flights?departure_airport_id=1&arrival_airport_id=2&date=2024-05-20",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "flights"
                                    ],
                                    "query": [
                                        {
                                            "key": "departure_airport_id",
                                            "value": "1"
                                        },
                                        {
                                            "key": "arrival_airport_id",
                                            "value": "2"
                                        },
                                        {
                                            "key": "date",
                                            "value": "2024-05-20"
                                        }
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get Flight Detail",
                            "request": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/flights/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "flights",
                                        "1"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                }
            ]
        },
        {
            "name": "2. Authenticated Routes",
            "item": [
                {
                    "name": "Profile & Session",
                    "item": [
                        {
                            "name": "Get User Profile",
                            "request": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/user",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "user"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Logout",
                            "request": {
                                "method": "POST",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/logout",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "logout"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Booking & Transactions",
                    "item": [
                        {
                            "name": "Check Promo Code",
                            "request": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"code\": \"DEALS2024\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/promo-codes/check",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "promo-codes",
                                        "check"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "My Transactions History",
                            "request": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/transactions",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "transactions"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Get Transaction Detail",
                            "request": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/transactions/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "transactions",
                                        "1"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Book Flight (Checkout)",
                            "request": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"flight_id\": 1,\n    \"flight_class_id\": 1,\n    \"name\": \"John Doe\",\n    \"email\": \"john@gmail.com\",\n    \"phone\": \"08123456789\",\n    \"passengers\": [\n        {\n            \"name\": \"Passenger one\",\n            \"date_of_birth\": \"1990-01-01\",\n            \"nationality\": \"Indonesia\"\n        }\n    ]\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/transactions",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "transactions"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                }
            ],
            "auth": {
                "type": "bearer",
                "bearer": [
                    {
                        "key": "token",
                        "value": "{{api_token}}",
                        "type": "string"
                    }
                ]
            }
        },
        {
            "name": "3. Admin Only Routes",
            "item": [
                {
                    "name": "Master Data Management",
                    "item": [
                        {
                            "name": "Airports",
                            "item": [
                                {
                                    "name": "Create Airport",
                                    "request": {
                                        "method": "POST",
                                        "header": [],
                                        "body": {
                                            "mode": "raw",
                                            "raw": "{\n    \"iata_code\": \"SIN\",\n    \"name\": \"Changi Airport\",\n    \"city\": \"Singapore\",\n    \"country\": \"Singapore\",\n    \"image\": \"airports/sin.jpg\"\n}",
                                            "options": {
                                                "raw": {
                                                    "language": "json"
                                                }
                                            }
                                        },
                                        "url": {
                                            "raw": "{{base_url}}/api/airports",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "airports"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Update Airport",
                                    "request": {
                                        "method": "PUT",
                                        "header": [],
                                        "body": {
                                            "mode": "raw",
                                            "raw": "{\n    \"name\": \"Changi International Airport\"\n}",
                                            "options": {
                                                "raw": {
                                                    "language": "json"
                                                }
                                            }
                                        },
                                        "url": {
                                            "raw": "{{base_url}}/api/airports/1",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "airports",
                                                "1"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Delete Airport",
                                    "request": {
                                        "method": "DELETE",
                                        "header": [],
                                        "url": {
                                            "raw": "{{base_url}}/api/airports/1",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "airports",
                                                "1"
                                            ]
                                        }
                                    },
                                    "response": []
                                }
                            ]
                        },
                        {
                            "name": "Airlines",
                            "item": [
                                {
                                    "name": "List Airlines",
                                    "request": {
                                        "method": "GET",
                                        "header": [],
                                        "url": {
                                            "raw": "{{base_url}}/api/airlines",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "airlines"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Create Airline",
                                    "request": {
                                        "method": "POST",
                                        "header": [],
                                        "body": {
                                            "mode": "raw",
                                            "raw": "{\n    \"code\": \"GA\",\n    \"name\": \"Garuda Indonesia\",\n    \"logo\": \"airlines/ga.png\"\n}",
                                            "options": {
                                                "raw": {
                                                    "language": "json"
                                                }
                                            }
                                        },
                                        "url": {
                                            "raw": "{{base_url}}/api/airlines",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "airlines"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Get Airline",
                                    "request": {
                                        "method": "GET",
                                        "header": [],
                                        "url": {
                                            "raw": "{{base_url}}/api/airlines/1",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "airlines",
                                                "1"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Update Airline",
                                    "request": {
                                        "method": "PUT",
                                        "header": [],
                                        "body": {
                                            "mode": "raw",
                                            "raw": "{\n    \"name\": \"Garuda Indonesia V2\"\n}",
                                            "options": {
                                                "raw": {
                                                    "language": "json"
                                                }
                                            }
                                        },
                                        "url": {
                                            "raw": "{{base_url}}/api/airlines/1",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "airlines",
                                                "1"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Delete Airline",
                                    "request": {
                                        "method": "DELETE",
                                        "header": [],
                                        "url": {
                                            "raw": "{{base_url}}/api/airlines/1",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "airlines",
                                                "1"
                                            ]
                                        }
                                    },
                                    "response": []
                                }
                            ]
                        },
                        {
                            "name": "Facilities",
                            "item": [
                                {
                                    "name": "List Facilities",
                                    "request": {
                                        "method": "GET",
                                        "header": [],
                                        "url": {
                                            "raw": "{{base_url}}/api/facilities",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "facilities"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Create Facility",
                                    "request": {
                                        "method": "POST",
                                        "header": [],
                                        "body": {
                                            "mode": "raw",
                                            "raw": "{\n    \"name\": \"Meals\",\n    \"image\": \"facilities/meals.png\",\n    \"description\": \"Free meals provided\"\n}",
                                            "options": {
                                                "raw": {
                                                    "language": "json"
                                                }
                                            }
                                        },
                                        "url": {
                                            "raw": "{{base_url}}/api/facilities",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "facilities"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Update Facility",
                                    "request": {
                                        "method": "PUT",
                                        "header": [],
                                        "body": {
                                            "mode": "raw",
                                            "raw": "{\n    \"name\": \"Gourmet Meals\"\n}",
                                            "options": {
                                                "raw": {
                                                    "language": "json"
                                                }
                                            }
                                        },
                                        "url": {
                                            "raw": "{{base_url}}/api/facilities/1",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "facilities",
                                                "1"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Delete Facility",
                                    "request": {
                                        "method": "DELETE",
                                        "header": [],
                                        "url": {
                                            "raw": "{{base_url}}/api/facilities/1",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "facilities",
                                                "1"
                                            ]
                                        }
                                    },
                                    "response": []
                                }
                            ]
                        },
                        {
                            "name": "Promo Codes",
                            "item": [
                                {
                                    "name": "List Promo Codes",
                                    "request": {
                                        "method": "GET",
                                        "header": [],
                                        "url": {
                                            "raw": "{{base_url}}/api/promo-codes",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "promo-codes"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Create Promo",
                                    "request": {
                                        "method": "POST",
                                        "header": [],
                                        "body": {
                                            "mode": "raw",
                                            "raw": "{\n    \"code\": \"DEALS2024\",\n    \"discount_type\": \"percentage\",\n    \"discount\": 20,\n    \"valid_until\": \"2024-12-31\"\n}",
                                            "options": {
                                                "raw": {
                                                    "language": "json"
                                                }
                                            }
                                        },
                                        "url": {
                                            "raw": "{{base_url}}/api/promo-codes",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "promo-codes"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Update Promo",
                                    "request": {
                                        "method": "PUT",
                                        "header": [],
                                        "body": {
                                            "mode": "raw",
                                            "raw": "{\n    \"discount\": 25\n}",
                                            "options": {
                                                "raw": {
                                                    "language": "json"
                                                }
                                            }
                                        },
                                        "url": {
                                            "raw": "{{base_url}}/api/promo-codes/1",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "promo-codes",
                                                "1"
                                            ]
                                        }
                                    },
                                    "response": []
                                },
                                {
                                    "name": "Delete Promo",
                                    "request": {
                                        "method": "DELETE",
                                        "header": [],
                                        "url": {
                                            "raw": "{{base_url}}/api/promo-codes/1",
                                            "host": [
                                                "{{base_url}}"
                                            ],
                                            "path": [
                                                "api",
                                                "promo-codes",
                                                "1"
                                            ]
                                        }
                                    },
                                    "response": []
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "Flights Management",
                    "item": [
                        {
                            "name": "Create Flight (With Schedules & Classes)",
                            "request": {
                                "method": "POST",
                                "header": [],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"flight_number\": \"GA-123\",\n    \"airline_id\": 1,\n    \"segments\": [\n        {\n            \"airport_id\": 1,\n            \"sequence\": 1,\n            \"time\": \"2024-05-20 08:00:00\"\n        },\n        {\n            \"airport_id\": 2,\n            \"sequence\": 2,\n            \"time\": \"2024-05-20 10:00:00\"\n        }\n    ],\n    \"classes\": [\n        {\n            \"class_type\": \"economy\",\n            \"price\": 1000000,\n            \"total_seats\": 180\n        }\n    ]\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/flights",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "flights"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Update Flight",
                            "request": {
                                "method": "PUT",
                                "header": [],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"flight_number\": \"GA-123-NEW\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/flights/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "flights",
                                        "1"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Delete Flight",
                            "request": {
                                "method": "DELETE",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/flights/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "flights",
                                        "1"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "Admin Reports",
                    "item": [
                        {
                            "name": "List All Transactions",
                            "request": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/admin/transactions",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "admin",
                                        "transactions"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Update Transaction Status",
                            "request": {
                                "method": "PUT",
                                "header": [],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"payment_status\": \"paid\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/admin/transactions/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "admin",
                                        "transactions",
                                        "1"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Delete Transaction Record",
                            "request": {
                                "method": "DELETE",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/admin/transactions/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "admin",
                                        "transactions",
                                        "1"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                },
                {
                    "name": "User Management",
                    "item": [
                        {
                            "name": "List All Users",
                            "request": {
                                "method": "GET",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/users",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "users"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Update User Role",
                            "request": {
                                "method": "PUT",
                                "header": [],
                                "body": {
                                    "mode": "raw",
                                    "raw": "{\n    \"role\": \"admin\"\n}",
                                    "options": {
                                        "raw": {
                                            "language": "json"
                                        }
                                    }
                                },
                                "url": {
                                    "raw": "{{base_url}}/api/users/1/role",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "users",
                                        "1",
                                        "role"
                                    ]
                                }
                            },
                            "response": []
                        },
                        {
                            "name": "Delete User",
                            "request": {
                                "method": "DELETE",
                                "header": [],
                                "url": {
                                    "raw": "{{base_url}}/api/users/1",
                                    "host": [
                                        "{{base_url}}"
                                    ],
                                    "path": [
                                        "api",
                                        "users",
                                        "1"
                                    ]
                                }
                            },
                            "response": []
                        }
                    ]
                }
            ],
            "auth": {
                "type": "bearer",
                "bearer": [
                    {
                        "key": "token",
                        "value": "{{api_token}}",
                        "type": "string"
                    }
                ]
            }
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:8000",
            "type": "string"
        },
        {
            "key": "api_token",
            "value": "",
            "type": "string"
        }
    ]
}